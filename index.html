<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MASSAGE PRO - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –¢–µ–ª—å-–ê–≤–∏–≤–µ</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –¢–µ–ª—å-–ê–≤–∏–≤–µ. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π, —Ä–µ–ª–∞–∫—Å –º–∞—Å—Å–∞–∂. –û–Ω–ª–∞–π–Ω –∑–∞–ø–∏—Å—å, —É–¥–æ–±–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ.">
    <meta name="keywords" content="–º–∞—Å—Å–∞–∂, –º–∞—Å—Å–∞–∂–∏—Å—Ç, –¢–µ–ª—å-–ê–≤–∏–≤, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂, —Ä–µ–ª–∞–∫—Å, –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂">
    <meta name="author" content="MASSAGE PRO">
    
    <!-- Open Graph -->
    <meta property="og:title" content="MASSAGE PRO - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂">
    <meta property="og:description" content="–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –¢–µ–ª—å-–ê–≤–∏–≤–µ">
    <meta property="og:type" content="website">
    <meta property="og:image" content="assets/images/og-image.jpg">
    
    <!-- Fonts & Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto:wght@100;300;400;700;900&family=Orbitron:wght@400;700;900&family=Montserrat:wght@400;700&family=Playfair+Display:wght@400;700&family=Oswald:wght@400;700&family=Russo+One&family=Anton&display=swap" rel="stylesheet">
    
    <!-- Main Styles -->
    <link rel="stylesheet" href="assets/css/style.css">
    
    <!-- Dynamic Theme Styles -->
    <style id="dynamicThemeStyles"></style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">MASSAGE PRO</div>
            <div class="loading-spinner"></div>
            <div class="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <nav class="nav-container">
            <div class="logo" id="siteLogo">
                <span class="logo-3d">MASSAGE</span>
                <span class="logo-accent">PRO</span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#home" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="#services" class="nav-link">–£—Å–ª—É–≥–∏</a></li>
                <li><a href="#booking" class="nav-link">–ó–∞–ø–∏—Å—å</a></li>
                <li><a href="#about" class="nav-link">–û–±–æ –º–Ω–µ</a></li>
                <li><a href="#contact" class="nav-link">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
            </ul>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <span class="hamburger"></span>
                <span class="hamburger"></span>
                <span class="hamburger"></span>
            </button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-bg-layers">
            <div class="hero-layer-1"></div>
            <div class="hero-layer-2"></div>
            <div class="hero-layer-3"></div>
        </div>
        <div class="hero-content">
            <div class="hero-badge">–ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô –ú–ê–°–°–ê–ñ</div>
            <h1 class="hero-title">
                <span class="title-3d">MASSAGE</span>
                <span class="title-gradient">PROFESSIONAL</span>
            </h1>
            <p class="hero-subtitle" id="heroSlogan">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Ä¢ –†–µ–ª–∞–∫—Å–∞—Ü–∏—è ‚Ä¢ –ó–¥–æ—Ä–æ–≤—å–µ ‚Ä¢ –ö—Ä–∞—Å–æ—Ç–∞</p>
            <div class="hero-stats">
                <div class="stat-item">
                    <div class="stat-number">500+</div>
                    <div class="stat-label">–î–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">8</div>
                    <div class="stat-label">–õ–µ—Ç –æ–ø—ã—Ç–∞</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">15</div>
                    <div class="stat-label">–¢–µ—Ö–Ω–∏–∫ –º–∞—Å—Å–∞–∂–∞</div>
                </div>
            </div>
            <div class="hero-buttons">
                <a href="#booking" class="cta-button primary">
                    <span>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è —Å–µ–π—á–∞—Å</span>
                    <i class="fas fa-arrow-right"></i>
                </a>
                <a href="#services" class="cta-button secondary">
                    <span>–£—Å–ª—É–≥–∏ –∏ —Ü–µ–Ω—ã</span>
                </a>
            </div>
        </div>
        <div class="hero-floating-elements">
            <div class="floating-element element-1"></div>
            <div class="floating-element element-2"></div>
            <div class="floating-element element-3"></div>
        </div>
    </section>

    <!-- Services Section -->
    <section id="services" class="services">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">–ù–ê–®–ò –£–°–õ–£–ì–ò</div>
                <h2 class="section-title">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ<br><span class="title-accent">–º–∞—Å—Å–∞–∂–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏</span></h2>
                <p class="section-subtitle">–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –∫–∞–∂–¥–æ–º—É –∫–ª–∏–µ–Ω—Ç—É —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫</p>
            </div>
            
            <div class="services-grid" id="servicesGrid">
                <!-- Services will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <section id="booking" class="booking">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">–û–ù–õ–ê–ô–ù –ó–ê–ü–ò–°–¨</div>
                <h2 class="section-title">–ó–∞–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞<br><span class="title-accent">—Å–µ–∞–Ω—Å –º–∞—Å—Å–∞–∂–∞</span></h2>
            </div>

            <div class="booking-container">
                <div class="booking-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-title">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-title">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-title">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</div>
                    </div>
                </div>

                <div class="booking-form-container">
                    <!-- Step 1: Service Selection -->
                    <div class="booking-step step-1 active">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –º–∞—Å—Å–∞–∂–∞</h3>
                        <div class="service-selector" id="serviceSelector">
                            <!-- Services will be loaded dynamically -->
                        </div>
                        <button class="next-step-btn" onclick="nextBookingStep()" disabled>
                            –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>

                    <!-- Step 2: Date & Time Selection -->
                    <div class="booking-step step-2">
                        <h3>–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –∏ –≤—Ä–µ–º—è</h3>
                        <div class="datetime-selector">
                            <div class="calendar-container">
                                <div class="calendar-header">
                                    <button class="calendar-nav prev" onclick="prevMonth()">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <div class="calendar-title" id="calendarTitle">–ê–≤–≥—É—Å—Ç 2025</div>
                                    <button class="calendar-nav next" onclick="nextMonth()">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <div class="calendar-grid" id="calendarGrid">
                                    <!-- Calendar will be generated by JS -->
                                </div>
                            </div>
                            <div class="time-slots-container">
                                <h4>–î–æ—Å—Ç—É–ø–Ω–æ–µ –≤—Ä–µ–º—è</h4>
                                <div class="time-slots" id="timeSlots">
                                    <!-- Time slots will be generated by JS -->
                                </div>
                            </div>
                        </div>
                        <div class="step-buttons">
                            <button class="prev-step-btn" onclick="prevBookingStep()">
                                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                            </button>
                            <button class="next-step-btn" onclick="nextBookingStep()" disabled>
                                –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Contact Info -->
                    <div class="booking-step step-3">
                        <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                        <form class="contact-form" id="contactForm">
                            <div class="form-group">
                                <label for="clientName">–ò–º—è</label>
                                <input type="text" id="clientName" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="clientPhone">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                                <input type="tel" id="clientPhone" name="phone" placeholder="+972-XX-XXX-XXXX" required>
                            </div>
                            <div class="form-group optional">
                                <label for="clientNotes">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                                <textarea id="clientNotes" name="notes" placeholder="–û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è..."></textarea>
                            </div>
                        </form>
                        <div class="step-buttons">
                            <button class="prev-step-btn" onclick="prevBookingStep()">
                                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                            </button>
                            <button class="next-step-btn" onclick="nextBookingStep()">
                                –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Step 4: Confirmation -->
                    <div class="booking-step step-4">
                        <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h3>
                        <div class="booking-summary" id="bookingSummary">
                            <!-- Summary will be generated by JS -->
                        </div>
                        <div class="confirmation-actions">
                            <button class="prev-step-btn" onclick="prevBookingStep()">
                                <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                            </button>
                            <button class="confirm-booking-btn" onclick="confirmBooking()">
                                <span>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–ø–∏—Å—å</span>
                                <i class="fas fa-check"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="container">
            <div class="about-content">
                <div class="about-text">
                    <div class="section-badge">–û–ë–û –ú–ù–ï</div>
                    <h2 class="section-title">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª —Å<br><span class="title-accent">8-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º</span></h2>
                    <p class="about-description" id="aboutDescription">
                        –ú–µ–Ω—è –∑–æ–≤—É—Ç <strong>–ê–ª–µ–∫—Å–∞–Ω–¥—Ä</strong>, –∏ —è —Å–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂–∏—Å—Ç —Å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ–º. 
                        –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Å—å –Ω–∞ –ª–µ—á–µ–±–Ω–æ–º, —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º –º–∞—Å—Å–∞–∂–µ –∏ —Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏–∏.
                    </p>
                    
                    <div class="credentials">
                        <div class="credential-item">
                            <i class="fas fa-certificate"></i>
                            <div>
                                <h4>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</h4>
                                <p>–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è –∞–∫–∞–¥–µ–º–∏—è –º–∞—Å—Å–∞–∂–∞ –¢–µ–ª—å-–ê–≤–∏–≤</p>
                            </div>
                        </div>
                        <div class="credential-item">
                            <i class="fas fa-award"></i>
                            <div>
                                <h4>–°–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</h4>
                                <p>–õ–µ—á–µ–±–Ω—ã–π, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–π, –º–∏–æ—Ñ–∞—Å—Ü–∏–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂</p>
                            </div>
                        </div>
                        <div class="credential-item">
                            <i class="fas fa-users"></i>
                            <div>
                                <h4>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h4>
                                <p>–ë–æ–ª–µ–µ 500 –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                            </div>
                        </div>
                    </div>

                    <div class="about-stats">
                        <div class="stat-box">
                            <div class="stat-number">8+</div>
                            <div class="stat-label">–ª–µ—Ç –æ–ø—ã—Ç–∞</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">500+</div>
                            <div class="stat-label">–∫–ª–∏–µ–Ω—Ç–æ–≤</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-number">15</div>
                            <div class="stat-label">—Ç–µ—Ö–Ω–∏–∫</div>
                        </div>
                    </div>
                </div>
                
                <div class="about-visual">
                    <div class="about-image-container">
                        <div class="about-image" id="profileImageContainer">
                            <img src="assets/images/masseur-photo.jpg" alt="–ú–∞—Å—Å–∞–∂–∏—Å—Ç" id="profileImage" style="display: none;">
                            <div class="image-placeholder" id="profilePlaceholder">
                                <i class="fas fa-user-md"></i>
                                <span>–§–æ—Ç–æ –º–∞—Å—Å–∞–∂–∏—Å—Ç–∞</span>
                            </div>
                        </div>
                        <div class="about-decorations">
                            <div class="decoration-1"></div>
                            <div class="decoration-2"></div>
                            <div class="decoration-3"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <div class="container">
            <div class="section-header">
                <div class="section-badge">–ö–û–ù–¢–ê–ö–¢–´</div>
                <h2 class="section-title">–°–≤—è–∂–∏—Ç–µ—Å—å<br><span class="title-accent">—Å–æ –º–Ω–æ–π</span></h2>
            </div>

            <div class="contact-grid">
                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="contact-info">
                        <h3>–ê–¥—Ä–µ—Å</h3>
                        <p id="businessAddress">—É–ª. –î–∏–∑–µ–Ω–≥–æ—Ñ 125<br>–¢–µ–ª—å-–ê–≤–∏–≤, –ò–∑—Ä–∞–∏–ª—å</p>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-phone"></i>
                    </div>
                    <div class="contact-info">
                        <h3>–¢–µ–ª–µ—Ñ–æ–Ω</h3>
                        <p id="businessPhone">+972-50-123-4567</p>
                        <a href="tel:+972501234567" class="contact-link" id="phoneLink">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</a>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <div class="contact-info">
                        <h3>WhatsApp</h3>
                        <p>–ë—ã—Å—Ç—Ä–∞—è —Å–≤—è–∑—å</p>
                        <a href="https://wa.me/972501234567" class="contact-link whatsapp-link" id="whatsappLink">–ù–∞–ø–∏—Å–∞—Ç—å</a>
                    </div>
                </div>

                <div class="contact-item">
                    <div class="contact-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="contact-info">
                        <h3>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h3>
                        <p id="workingHours">–ü–Ω-–ü—Ç: 9:00-21:00<br>–°–±-–í—Å: 10:00-20:00</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo" id="footerLogo">
                    <span class="logo-3d">MASSAGE</span>
                    <span class="logo-accent">PRO</span>
                </div>
                <div class="footer-text">
                    <p>&copy; 2025 MASSAGE PRO. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                    <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∞–∂ –≤ –¢–µ–ª—å-–ê–≤–∏–≤–µ</p>
                </div>
                <div class="footer-social">
                    <a href="https://wa.me/972501234567" class="social-link" id="footerWhatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </a>
                    <a href="tel:+972501234567" class="social-link" id="footerPhone">
                        <i class="fas fa-phone"></i>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Success Modal -->
    <div id="successModal" class="modal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3>–ó–∞–ø–∏—Å—å —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!</h3>
            <p id="successMessage"></p>
            <button onclick="closeModal()" class="modal-btn">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/script.js"></script>
    <script src="assets/js/smart-calendar.js"></script>
    <script src="assets/js/notifications.js"></script>
    <script src="assets/js/image-manager-pro.js"></script>
    <script src="assets/js/booking-system.js"></script>
    
    <!-- Initialization Script -->
    <script>
        // Global variables for new systems
        let smartCalendar;
        let notificationSystem;
        let imageManager;
        
        // Initialize after DOM loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize smart calendar
            smartCalendar = new SmartCalendar();
            
            // Initialize notification system
            notificationSystem = new NotificationSystem();
            
            // Initialize image manager
            imageManager = window.imageManager || new ImageManagerPro();
            
            // Load saved content
            loadSavedContent();
            
            // Load saved images
            loadSavedImages();
            
            // Load services
            loadServices();
            
            // Override calendar generation
            window.generateCalendar = function() {
                if (smartCalendar) {
                    smartCalendar.generateEnhancedCalendar();
                }
            };
            
            // Enhanced booking confirmation
            const originalConfirmBooking = window.confirmBooking;
            window.confirmBooking = async function() {
                const bookingData = {
                    service: selectedService,
                    date: selectedDate,
                    time: selectedTime,
                    client: {
                        name: document.getElementById('clientName').value,
                        phone: document.getElementById('clientPhone').value,
                        notes: document.getElementById('clientNotes').value
                    }
                };

                const result = await window.bookingSystem.createBooking(bookingData);
                
                if (result.success) {
                    // Schedule notifications
                    notificationSystem.scheduleBookingNotifications(result.booking);
                    
                    // Show success modal
                    showEnhancedSuccessModal(result.booking);
                    
                    // Reset form
                    if (typeof resetBookingForm === 'function') {
                        resetBookingForm();
                    }
                } else {
                    alert(`–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏: ${result.error}`);
                }
            };
        });

        // Load saved content
        function loadSavedContent() {
            const savedContent = localStorage.getItem('massageContent');
            if (savedContent) {
                updateSiteContent(JSON.parse(savedContent));
            }
        }

        // Load saved images
        function loadSavedImages() {
            const savedImages = localStorage.getItem('massageImages');
            if (savedImages) {
                updateSiteImages(JSON.parse(savedImages));
            }
        }

        // Load services
        function loadServices() {
            const savedServices = localStorage.getItem('massageServices');
            const services = savedServices ? JSON.parse(savedServices) : {
                classic: { name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∞–∂', price: 180, duration: 60, icon: 'fas fa-hand-paper' },
                sports: { name: '–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∞–∂', price: 220, duration: 60, icon: 'fas fa-dumbbell' },
                relax: { name: '–†–µ–ª–∞–∫—Å –º–∞—Å—Å–∞–∂', price: 200, duration: 75, icon: 'fas fa-spa' },
                deep: { name: '–ì–ª—É–±–æ–∫–∏–π –º–∞—Å—Å–∞–∂', price: 250, duration: 60, icon: 'fas fa-fire' }
            };
            
            // Update services grid
            const servicesGrid = document.getElementById('servicesGrid');
            if (servicesGrid) {
                servicesGrid.innerHTML = Object.keys(services).map(key => {
                    const service = services[key];
                    return `
                        <div class="service-card" data-service="${key}">
                            <div class="card-glow"></div>
                            ${key === 'sports' ? '<div class="featured-badge">–ü–û–ü–£–õ–Ø–†–ù–´–ô</div>' : ''}
                            <div class="service-icon">
                                <i class="${service.icon}"></i>
                            </div>
                            <h3 class="service-name">${service.name}</h3>
                            <div class="service-price">
                                <span class="price-amount">‚Ç™${service.price}</span>
                                <span class="price-duration">${service.duration} –º–∏–Ω</span>
                            </div>
                            <p class="service-description">
                                ${getServiceDescription(key)}
                            </p>
                            <ul class="service-benefits">
                                ${getServiceBenefits(key)}
                            </ul>
                            <button class="book-btn" onclick="selectService('${key}', '${service.name}', ${service.price})">
                                <span>–í—ã–±—Ä–∞—Ç—å</span>
                                <i class="fas fa-calendar-plus"></i>
                            </button>
                        </div>
                    `;
                }).join('');
            }
            
            // Update service selector
            const serviceSelector = document.getElementById('serviceSelector');
            if (serviceSelector) {
                serviceSelector.innerHTML = Object.keys(services).map(key => {
                    const service = services[key];
                    return `
                        <div class="service-option" data-service="${key}">
                            <div class="service-icon"><i class="${service.icon}"></i></div>
                            <div class="service-info">
                                <div class="service-name">${service.name}</div>
                                <div class="service-price">‚Ç™${service.price} ‚Ä¢ ${service.duration} –º–∏–Ω</div>
                            </div>
                        </div>
                    `;
                }).join('');
                
                // Re-attach event listeners
                document.querySelectorAll('.service-option').forEach(option => {
                    option.addEventListener('click', function() {
                        selectServiceOption(this);
                    });
                });
            }
        }

        // Helper functions
        function getServiceDescription(key) {
            const descriptions = {
                classic: '–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ª–µ—á–µ–±–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è –æ–±—â–µ–≥–æ –æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—è –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è',
                sports: '–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∞–∂ –¥–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª—é–¥–µ–π',
                relax: '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π –º–∞—Å—Å–∞–∂ –¥–ª—è —Å–Ω—è—Ç–∏—è —Å—Ç—Ä–µ—Å—Å–∞ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è',
                deep: '–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≥–ª—É–±–æ–∫–∏–º–∏ –º—ã—à–µ—á–Ω—ã–º–∏ —Å–ª–æ—è–º–∏'
            };
            return descriptions[key] || '';
        }

        function getServiceBenefits(key) {
            const benefits = {
                classic: ['–£–ª—É—á—à–µ–Ω–∏–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è', '–°–Ω—è—Ç–∏–µ –º—ã—à–µ—á–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è', '–û–±—â–µ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ'],
                sports: ['–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫', '–ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ —Ç—Ä–∞–≤–º', '–ü–æ–≤—ã—à–µ–Ω–∏–µ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏'],
                relax: ['–ì–ª—É–±–æ–∫–æ–µ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ', '–°–Ω—è—Ç–∏–µ —Å—Ç—Ä–µ—Å—Å–∞', '–£–ª—É—á—à–µ–Ω–∏–µ —Å–Ω–∞'],
                deep: ['–†–∞–±–æ—Ç–∞ —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–∂–∏–º–∞–º–∏', '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–≤–∏–∂–Ω–æ—Å—Ç–∏', '–î–ª–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç']
            };
            return (benefits[key] || []).map(b => `<li>${b}</li>`).join('');
        }

        function showEnhancedSuccessModal(booking) {
            const modal = document.getElementById('successModal');
            const message = document.getElementById('successMessage');
            
            if (modal && message) {
                const dateStr = new Date(booking.date).toLocaleDateString('ru-RU', {
                    weekday: 'long',
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                
                message.innerHTML = `
                    <div class="success-details">
                        <p><strong>–ù–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏:</strong> ${booking.id}</p>
                        <p><strong>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</strong> ${dateStr}, ${booking.time}</p>
                        <p><strong>–£—Å–ª—É–≥–∞:</strong> ${booking.service.name}</p>
                        <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> ‚Ç™${booking.service.price}</p>
                        <br>
                        <p>üì± –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ WhatsApp</p>
                        <p>‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∑–∞ –¥–µ–Ω—å –¥–æ –≤–∏–∑–∏—Ç–∞</p>
                        <p>üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –ø—Ä–∏–¥–µ—Ç –ø–æ—Å–ª–µ —Å–µ–∞–Ω—Å–∞</p>
                    </div>
                `;
                modal.classList.add('show');
            }
        }

        // Update site content
        function updateSiteContent(content) {
            // Update business name
            if (content.businessName) {
                const parts = content.businessName.split(' ');
                document.querySelectorAll('.logo-3d').forEach(el => {
                    el.textContent = parts[0] || 'MASSAGE';
                });
                document.querySelectorAll('.logo-accent').forEach(el => {
                    el.textContent = parts[1] || 'PRO';
                });
            }

            // Update phone
            if (content.businessPhone) {
                document.getElementById('businessPhone').textContent = content.businessPhone;
                const phoneLinks = document.querySelectorAll('a[href^="tel:"]');
                phoneLinks.forEach(link => {
                    link.href = `tel:${content.businessPhone.replace(/\D/g, '')}`;
                });
            }

            // Update WhatsApp
            if (content.whatsappPhone) {
                const whatsappLinks = document.querySelectorAll('a[href*="wa.me"]');
                whatsappLinks.forEach(link => {
                    link.href = `https://wa.me/${content.whatsappPhone}`;
                });
            }

            // Update address
            if (content.businessAddress) {
                document.getElementById('businessAddress').innerHTML = content.businessAddress.replace(',', '<br>');
            }

            // Update about
            if (content.aboutText) {
                document.getElementById('aboutDescription').innerHTML = content.aboutText;
            }

            // Update slogan
            if (content.businessSlogan) {
                document.getElementById('heroSlogan').textContent = content.businessSlogan;
            }
        }

        // Update site images
        function updateSiteImages(images) {
            // Profile photo
            if (images.profile && images.profile.length > 0) {
                const profileImg = document.getElementById('profileImage');
                const placeholder = document.getElementById('profilePlaceholder');
                
                if (profileImg && placeholder) {
                    profileImg.src = images.profile[0].optimized;
                    profileImg.style.display = 'block';
                    placeholder.style.display = 'none';
                }
            }

            // Logo
            if (images.logo && images.logo.length > 0) {
                updateSiteLogo(images.logo[0].optimized);
            }

            // Gallery
            if (images.gallery && images.gallery.length > 0) {
                createGallerySection(images.gallery);
            }

            // Cabinet
            if (images.cabinet && images.cabinet.length > 0) {
                createCabinetSection(images.cabinet);
            }

            // Certificates
            if (images.certificates && images.certificates.length > 0) {
                createCertificatesSection(images.certificates);
            }
        }

        function updateSiteLogo(logoData) {
            const logos = document.querySelectorAll('#siteLogo, #footerLogo');
            logos.forEach(logo => {
                logo.innerHTML = `<img src="${logoData}" alt="Logo" style="height: 50px; width: auto;">`;
            });
        }

        function createGallerySection(galleryImages) {
            let gallerySection = document.getElementById('gallery');
            
            if (!gallerySection) {
                gallerySection = document.createElement('section');
                gallerySection.id = 'gallery';
                gallerySection.className = 'gallery-section';
                gallerySection.style.cssText = `
                    padding: 6rem 0;
                    background: var(--secondary-dark);
                    position: relative;
                `;
                
                gallerySection.innerHTML = `
                    <div class="container">
                        <div class="section-header">
                            <div class="section-badge">–ì–ê–õ–ï–†–ï–Ø –†–ê–ë–û–¢</div>
                            <h2 class="section-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã<br><span class="title-accent">–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã</span></h2>
                            <p class="section-subtitle">–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä –∏ –¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                        </div>
                        <div class="gallery-grid-main" id="galleryGridMain"></div>
                    </div>
                `;
                
                const contactSection = document.getElementById('contact');
                contactSection.parentNode.insertBefore(gallerySection, contactSection);
                
                addNavigationLink('gallery', '–ì–∞–ª–µ—Ä–µ—è', 'contact');
            }
            
            const galleryGrid = document.getElementById('galleryGridMain');
            if (galleryGrid) {
                imageManager.createImageGallery(galleryImages, 'galleryGridMain');
            }
            
            window.galleryImages = galleryImages;
        }

        function createCabinetSection(cabinetImages) {
            // Similar to gallery but for cabinet photos
            let cabinetSection = document.getElementById('cabinet');
            
            if (!cabinetSection && cabinetImages.length > 0) {
                cabinetSection = document.createElement('section');
                cabinetSection.id = 'cabinet';
                cabinetSection.className = 'cabinet-section';
                cabinetSection.style.cssText = `
                    padding: 6rem 0;
                    background: var(--primary-dark);
                    position: relative;
                `;
                
                cabinetSection.innerHTML = `
                    <div class="container">
                        <div class="section-header">
                            <div class="section-badge">–ù–ê–®–ï –ü–†–û–°–¢–†–ê–ù–°–¢–í–û</div>
                            <h2 class="section-title">–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π<br><span class="title-accent">–º–∞—Å—Å–∞–∂–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</span></h2>
                            <p class="section-subtitle">–£—é—Ç–Ω–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—è</p>
                        </div>
                        <div class="cabinet-grid" id="cabinetGrid"></div>
                    </div>
                `;
                
                const aboutSection = document.getElementById('about');
                aboutSection.parentNode.insertBefore(cabinetSection, aboutSection.nextSibling);
                
                addNavigationLink('cabinet', '–ö–∞–±–∏–Ω–µ—Ç', 'about');
            }
            
            const cabinetGrid = document.getElementById('cabinetGrid');
            if (cabinetGrid) {
                imageManager.createImageGallery(cabinetImages, 'cabinetGrid');
            }
            
            window.cabinetImages = cabinetImages;
        }

        function createCertificatesSection(certificates) {
            // Create certificates showcase
            // Implementation similar to gallery
        }

        function addNavigationLink(sectionId, linkText, insertBefore) {
            const navMenu = document.getElementById('navMenu');
            const beforeElement = navMenu.querySelector(`a[href="#${insertBefore}"]`);
            
            if (beforeElement && !navMenu.querySelector(`a[href="#${sectionId}"]`)) {
                const navItem = document.createElement('li');
                navItem.innerHTML = `<a href="#${sectionId}" class="nav-link">${linkText}</a>`;
                beforeElement.parentNode.parentNode.insertBefore(navItem, beforeElement.parentNode);
            }
        }

        // Listen for updates from admin panel
        window.addEventListener('message', function(event) {
            if (event.data.type === 'updateContent') {
                updateSiteContent(event.data.content);
            } else if (event.data.type === 'updateImages') {
                updateSiteImages(event.data.images);
            } else if (event.data.type === 'updateTheme') {
                applyTheme(event.data.theme);
            }
        });

        // Apply theme
        function applyTheme(theme) {
            const styles = document.getElementById('dynamicThemeStyles');
            if (styles) {
                styles.textContent = theme.css;
            }
        }
    </script>
</body>
</html>